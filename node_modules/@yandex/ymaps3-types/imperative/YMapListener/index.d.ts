import type { IndoorPlan, PixelCoordinates } from "../../common/types";
import { YMapFeature } from "../YMapFeature";
import { YMapMarker } from "../YMapMarker";
import type { BehaviorType, LngLat } from "../../common/types";
import { YMapEntity } from "../YMapEnities";
import { YMapHotspot } from "../YMapHotspot";
import type { YMapCamera, YMapLocation } from "../YMap";
type MapDomEvent = MouseEvent | PointerEvent | TouchEvent;
type CommonDetails = Pick<MapDomEvent, "type" | "shiftKey" | "altKey" | "metaKey" | "ctrlKey">;
type PointerEventDetails = Pick<PointerEvent, "pointerId" | "button" | "buttons" | "pointerType"> & CommonDetails;
type MouseEventDetails = Pick<MouseEvent, "button" | "buttons"> & CommonDetails;
type TouchEventDetails = CommonDetails & {
    touches: number[];
};
export interface DomEvent {
    /** [x, y] */
    readonly screenCoordinates: [
        number,
        number
    ];
    readonly coordinates: LngLat;
    readonly details: CommonDetails;
    stopPropagation(): void;
}
export interface TouchDomEvent extends DomEvent {
    readonly details: TouchEventDetails;
}
export interface MouseDomEvent extends DomEvent {
    readonly details: MouseEventDetails;
}
export interface PointerDomEvent extends DomEvent {
    readonly details: PointerEventDetails;
}
type HandlerEntity<TType extends string, TEntity> = {
    type: TType;
    entity: TEntity;
    layer: string;
    source: string;
};
export type DomEventHandlerObject = HandlerEntity<"feature", YMapFeature> | HandlerEntity<"marker", YMapMarker> | HandlerEntity<"hotspot", YMapHotspot> | undefined;
interface TileLayerState {
    /** Number of tiles loaded from the server. */
    tilesLoaded: number;
    /** Number of tiles ready to be displayed. */
    tilesReady: number;
    /** Total number of tiles in the visible area. */
    tilesTotal: number;
}
interface MapState {
    getLayerState(layerId: string, type: string, effectiveMode?: "raster" | "vector"): Record<string, unknown> | undefined;
    getLayerState(layerId: string, type: "tile", effectiveMode?: "raster" | "vector"): TileLayerState | undefined;
}
export type DomEventHandler = (object: DomEventHandlerObject, event: DomEvent) => void;
export type TouchDomEventHandler = (object: DomEventHandlerObject, event: TouchDomEvent) => void;
export type MouseDomEventHandler = (object: DomEventHandlerObject, event: MouseDomEvent) => void;
export type PointerDomEventHandler = (object: DomEventHandlerObject, event: PointerDomEvent) => void;
type Location = Required<YMapLocation>;
interface UpdateObject {
    type: "update";
    location: Location;
    camera: YMapCamera;
    mapInAction: boolean;
}
interface ResizeObject {
    type: "resize";
    size: Readonly<PixelCoordinates>;
    mapInAction: boolean;
}
type MapEventHandler<TObject> = (object: TObject) => void;
export type MapEventUpdateHandler = MapEventHandler<UpdateObject>;
export type MapEventResizeHandler = MapEventHandler<ResizeObject>;
export type MapEventReadyStateChangeHandler = MapEventHandler<MapState>;
export type IndoorPlansHandler = (object: {
    type: IndoorPlanType;
    indoorPlans: readonly IndoorPlan[] | null;
}) => void;
export type BehaviorMapEventHandler = (event: {
    type: BehaviorType;
    location: Location;
    camera: YMapCamera;
}) => void;
export type BehaviorMapEvent = {
    type: "pinchZoom" | "scrollZoom" | "dblClick" | "magnifier" | "oneFingerZoom" | "mouseRotate" | "mouseTilt" | "pinchRotate" | "panTilt";
    location: Location;
    camera: YMapCamera;
};
export type DragMapEvent = {
    type: "drag";
    location: Location;
    camera: YMapCamera;
    preventDefault: () => void;
    points: {
        length: number;
    };
};
export type BehaviorStartHandler = (event: BehaviorMapEvent | DragMapEvent) => void;
export type DomEvents = {
    onTouchStart: TouchDomEventHandler;
    onTouchMove: TouchDomEventHandler;
    onTouchEnd: TouchDomEventHandler;
    onTouchCancel: TouchDomEventHandler;
    onPointerDown: PointerDomEventHandler;
    onPointerMove: PointerDomEventHandler;
    onPointerUp: PointerDomEventHandler;
    onPointerCancel: PointerDomEventHandler;
    onFastClick: DomEventHandler;
    onClick: DomEventHandler;
    onDblClick: DomEventHandler;
    onMouseUp: MouseDomEventHandler;
    onMouseDown: MouseDomEventHandler;
    onMouseEnter: MouseDomEventHandler;
    onMouseLeave: MouseDomEventHandler;
    onMouseMove: MouseDomEventHandler;
    onContextMenu: DomEventHandler;
    onRightDblClick: DomEventHandler;
};
export type MapEvents = {
    onUpdate: MapEventUpdateHandler;
    onResize: MapEventResizeHandler;
    onStateChanged: MapEventReadyStateChangeHandler;
};
export type BehaviorEvents = {
    onActionStart: BehaviorStartHandler;
    onActionEnd: BehaviorMapEventHandler;
};
type IndoorPlanType = "indoorPlansChanged";
export type NullablePartial<T> = {
    [P in keyof T]?: T[P] | null;
};
type DomEventsProps = Partial<DomEvents> & {
    layer?: string;
};
type YMapListenerProps = DomEventsProps | NullablePartial<MapEvents> | NullablePartial<BehaviorEvents>;
/**
 * A component for handling events of the map and its child elements. DOM events are also hung through this component.
 * @example
 * ```javascript
 * const clickCallback = () => alert("Clicked!");
 *
 * const mapListener = new YMapListener({
 *     layerId: "any",
 *     onClick: clickCallback,
 * });
 *
 * map.addChild(mapListener);
 * ```
 * @see [More about events](https://yandex.ru/dev/jsapi30/doc/en/dg/concepts/events)
 */
declare class YMapListener extends YMapEntity<YMapListenerProps> {
    private _domHandlers;
    private _mapHandlers;
    private _actionStartHandler?;
    private _actionEndHandler?;
    private _subscribeDomEvent;
    private _subscribeMapEvent;
    private _subscribeMapIndoorPlansEvent;
    private _subscribeMapStateChanged;
    private _subscribeActionEventStart;
    private _subscribeActionEventEnd;
    private _subscribe;
    private _unsubscribe;
    protected _onAttach(): void;
    protected _onDetach(): void;
    protected _onUpdate(): void;
    private __getRealCookie;
}
export { YMapListener, YMapListenerProps };
