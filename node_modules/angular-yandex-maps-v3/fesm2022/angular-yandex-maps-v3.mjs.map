{"version":3,"file":"angular-yandex-maps-v3.mjs","sources":["../../../../libs/angular-yandex-maps-v3/src/lib/tokens/y-config.ts","../../../../libs/angular-yandex-maps-v3/src/lib/utils/zone/zone.ts","../../../../libs/angular-yandex-maps-v3/src/lib/services/y-api-loader/y-api-loader.service.ts","../../../../libs/angular-yandex-maps-v3/src/lib/utils/generate-random-id/generate-random-id.ts","../../../../libs/angular-yandex-maps-v3/src/lib/components/common/y-map/y-map.component.ts","../../../../libs/angular-yandex-maps-v3/src/lib/components/common/y-map-clusterer/y-map-clusterer.directive.ts","../../../../libs/angular-yandex-maps-v3/src/lib/components/common/y-map-default-marker/y-map-default-marker.directive.ts","../../../../libs/angular-yandex-maps-v3/src/lib/components/common/y-map-feature/y-map-feature.directive.ts","../../../../libs/angular-yandex-maps-v3/src/lib/components/common/y-map-feature-data-source/y-map-feature-data-source.directive.ts","../../../../libs/angular-yandex-maps-v3/src/lib/components/common/y-map-hint/y-map-hint.directive.ts","../../../../libs/angular-yandex-maps-v3/src/lib/components/common/y-map-listener/y-map-listener.directive.ts","../../../../libs/angular-yandex-maps-v3/src/lib/components/common/y-map-marker/y-map-marker.directive.ts","../../../../libs/angular-yandex-maps-v3/src/lib/components/controls/y-map-controls/y-map-controls.directive.ts","../../../../libs/angular-yandex-maps-v3/src/lib/components/controls/y-map-control/y-map-control.directive.ts","../../../../libs/angular-yandex-maps-v3/src/lib/components/controls/y-map-control-button/y-map-control-button.directive.ts","../../../../libs/angular-yandex-maps-v3/src/lib/components/controls/y-map-control-common-button/y-map-control-common-button.directive.ts","../../../../libs/angular-yandex-maps-v3/src/lib/components/controls/y-map-geolocation-control/y-map-geolocation-control.directive.ts","../../../../libs/angular-yandex-maps-v3/src/lib/components/controls/y-map-open-maps-button/y-map-open-maps-button.directive.ts","../../../../libs/angular-yandex-maps-v3/src/lib/components/controls/y-map-scale-control/y-map-scale-control.directive.ts","../../../../libs/angular-yandex-maps-v3/src/lib/components/controls/y-map-zoom-control/y-map-zoom-control.directive.ts","../../../../libs/angular-yandex-maps-v3/src/lib/components/layers/y-map-default-features-layer/y-map-default-features-layer.directive.ts","../../../../libs/angular-yandex-maps-v3/src/lib/components/layers/y-map-default-scheme-layer/y-map-default-scheme-layer.directive.ts","../../../../libs/angular-yandex-maps-v3/src/lib/components/layers/y-map-layer/y-map-layer.directive.ts","../../../../libs/angular-yandex-maps-v3/src/index.ts","../../../../libs/angular-yandex-maps-v3/src/angular-yandex-maps-v3.ts"],"sourcesContent":["import { InjectionToken, makeEnvironmentProviders } from '@angular/core';\r\nimport type { Observable } from 'rxjs';\r\n\r\nimport type { YConfig } from '../types/y-config';\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const Y_CONFIG = new InjectionToken<YConfig | Observable<YConfig>>('Y_CONFIG', {\r\n  factory: () => ({}),\r\n});\r\n\r\n// It must be an arrow function, because compodoc cannot parse functions without issues.\r\n// TODO: convert provideYConfig to a function + create an issue in compodoc about rawdescription.\r\n\r\n/**\r\n * Provides a Y_CONFIG token with the given configuration.\r\n *\r\n * ```ts\r\n * import { provideYConfig, YConfig } from 'angular-yandex-maps-v3';\r\n *\r\n * export const config: YConfig = {\r\n *   apikey: 'X-X-X',\r\n * };\r\n *\r\n * export const appConfig: ApplicationConfig = {\r\n *   providers: [provideZoneChangeDetection({ eventCoalescing: true }), provideYConfig(config)],\r\n * };\r\n * ```\r\n */\r\nexport const provideYConfig = (config: YConfig | Observable<YConfig>) => {\r\n  return makeEnvironmentProviders([\r\n    {\r\n      provide: Y_CONFIG,\r\n      useValue: config,\r\n    },\r\n  ]);\r\n};\r\n","/**\r\n * Copied from Taiga UI.\r\n * https://github.com/taiga-family/taiga-ui/blob/eafb4f498ff57f4a21eebe74aee97a72b5e8d3f8/projects/cdk/observables/zone.ts#L19\r\n */\r\n\r\nimport type { NgZone } from '@angular/core';\r\nimport type { MonoTypeOperatorFunction } from 'rxjs';\r\nimport { Observable } from 'rxjs';\r\n\r\nexport function enterZone<T>(zone: NgZone): MonoTypeOperatorFunction<T> {\r\n  return (source) =>\r\n    new Observable((subscriber) =>\r\n      source.subscribe({\r\n        next: (value) => zone.run(() => subscriber.next(value)),\r\n        error: (error: unknown) => zone.run(() => subscriber.error(error)),\r\n        complete: () => zone.run(() => subscriber.complete()),\r\n      }),\r\n    );\r\n}\r\n\r\nexport function exitZone<T>(zone: NgZone): MonoTypeOperatorFunction<T> {\r\n  return (source) =>\r\n    new Observable((subscriber) => zone.runOutsideAngular(() => source.subscribe(subscriber)));\r\n}\r\n","import { isPlatformBrowser } from '@angular/common';\r\nimport { DOCUMENT, inject, Injectable, NgZone, PLATFORM_ID } from '@angular/core';\r\nimport type { Observable } from 'rxjs';\r\nimport {\r\n  BehaviorSubject,\r\n  from,\r\n  fromEvent,\r\n  isObservable,\r\n  merge,\r\n  mergeMap,\r\n  NEVER,\r\n  of,\r\n  tap,\r\n  throwError,\r\n} from 'rxjs';\r\nimport { map, switchMap, take } from 'rxjs/operators';\r\n\r\nimport { Y_CONFIG } from '../../tokens/y-config';\r\nimport type { YConfig } from '../../types/y-config';\r\nimport { exitZone } from '../../utils/zone/zone';\r\n\r\n/**\r\n * @internal\r\n */\r\ninterface ApiLoaderCache {\r\n  /**\r\n   * The API global object.\r\n   */\r\n  ymaps3?: typeof ymaps3;\r\n\r\n  /**\r\n   * A script element that loads the API.\r\n   */\r\n  script?: HTMLScriptElement;\r\n}\r\n\r\n/**\r\n * The `YApiLoader` service handles loading of the Yandex.Maps API.\r\n * Use it if you do not need `YMapComponent`.\r\n *\r\n * The service supports dynamic configuration changes by subscribing on a `YConfig` observable.\r\n * It stores global API objects in a local cache, and updates them in runtime if necessary.\r\n * That's why do not provide this service, it will break the synchronizations between the local cache and HTML scripts.\r\n *\r\n * ```ts\r\n * import { YApiLoaderService } from 'angular-yandex-maps-v3';\r\n *\r\n * @Component()\r\n * export class AppComponent {\r\n *   constructor(private yApiLoaderService: YApiLoaderService) {\r\n *     // Don't forget to unsubscribe\r\n *     this.yApiLoaderService.load()\r\n *       .subscribe(v => console.log(v))\r\n *   }\r\n * }\r\n * ```\r\n */\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class YApiLoaderService {\r\n  private readonly document = inject(DOCUMENT);\r\n  private readonly ngZone = inject(NgZone);\r\n  private readonly isBrowser = isPlatformBrowser(inject(PLATFORM_ID));\r\n\r\n  private readonly defaultConfig: YConfig = {\r\n    lang: 'ru_RU',\r\n  };\r\n\r\n  private readonly config$ = new BehaviorSubject<YConfig>(this.defaultConfig);\r\n\r\n  private readonly cache = new Map<string, ApiLoaderCache>();\r\n\r\n  constructor() {\r\n    let config = inject<YConfig | Observable<YConfig>>(Y_CONFIG);\r\n\r\n    if (!isObservable(config)) {\r\n      config = of(config);\r\n    }\r\n\r\n    config.subscribe((config) => {\r\n      this.config$.next({\r\n        ...this.defaultConfig,\r\n        ...config,\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Loads the Yandex.Maps API.\r\n   * Runs outside an Angular zone.\r\n   */\r\n  load(): Observable<typeof ymaps3> {\r\n    if (!this.isBrowser) {\r\n      return NEVER;\r\n    }\r\n\r\n    return this.config$.pipe(\r\n      // 3rd party libraries shouldn't be run in a zone.\r\n      // Libraries run tons of different events (requestAnimationFrame, setTimeout, etc.).\r\n      // We do not need to run change detection for these events from the library.\r\n      // Exit from a zone here, so all components are also created outside a zone.\r\n      exitZone(this.ngZone),\r\n      mergeMap((config) => {\r\n        // We use a script source as a cache key, since there are a lot of parameters that affect the API.\r\n        // We can't rely only on one parameter. E.g., a key is changed, we need to reload the API.\r\n        const cacheKey = this.getScriptSource(config);\r\n        const cache = this.cache.get(cacheKey) || {};\r\n\r\n        // If it exists in the cache, return the ymaps3 from it,\r\n        // since script.onload triggers only once.\r\n        if (cache.ymaps3) {\r\n          const apiObject = cache.ymaps3;\r\n\r\n          // ready confirms that the API and DOM are ready for use,\r\n          // we can return of(window.ymaps3), but calling ready is safer, I believe.\r\n          return from(apiObject.ready).pipe(\r\n            // Each nested operator should run outside the zone.\r\n            // Refer to the comment above for the reason why we need to exit the zone.\r\n            exitZone(this.ngZone),\r\n            // Actually, we need to update it only if they are not equal,\r\n            // it happens if we change the configuration which required new window.ymaps3.\r\n            tap(() => ((window as any).ymaps3 = apiObject)),\r\n            map(() => apiObject),\r\n          );\r\n        }\r\n\r\n        let script = cache.script;\r\n\r\n        // It's possible that we have a script, but do not have ymaps3.\r\n        // It happens if there are concurrent requests, and the first request creates the script,\r\n        // while the second must just wait for the API to be loaded.\r\n        if (!script) {\r\n          script = this.createScript(config);\r\n          this.cache.set(cacheKey, { script });\r\n          this.document.body.appendChild(script);\r\n        }\r\n\r\n        if ((window as any).ymaps3) {\r\n          // The API throws an error on script load if window.ymaps3 exists.\r\n          // So, before changing the configuration, delete the global object.\r\n          delete (window as any).ymaps3;\r\n\r\n          // On the first API load, we import packages that are stored in chunks.\r\n          // When we load a new API configuration, it checks this global variable\r\n          // and tries to execute them. The problem is that window.ymaps3 is already deleted,\r\n          // and this script hasn't loaded a new ymaps3 yet. As a result, we get an error\r\n          // from these packages. That's why we need to delete these chunks, so there is no\r\n          // difference between the 1st and nth script load.\r\n          delete (window as any).__chunk_yandex_ymaps3;\r\n        }\r\n\r\n        // window.ymaps3 is set explicitly via a script load event.\r\n        const load = fromEvent(script, 'load').pipe(\r\n          switchMap(() => from(ymaps3.ready)),\r\n          tap(() => this.cache.set(cacheKey, { script, ymaps3 })),\r\n          map(() => ymaps3),\r\n        );\r\n\r\n        const error = fromEvent(script, 'error').pipe(switchMap(throwError));\r\n\r\n        return merge(load, error).pipe(\r\n          // Each nested operator should run outside the zone.\r\n          // Refer to the comment above for the reason why we need to exit the zone.\r\n          exitZone(this.ngZone),\r\n          take(1),\r\n        );\r\n      }),\r\n    );\r\n  }\r\n\r\n  private createScript(config: YConfig): HTMLScriptElement {\r\n    const script = this.document.createElement('script');\r\n\r\n    script.type = 'text/javascript';\r\n    script.src = this.getScriptSource(config);\r\n    script.id = 'yandexMapsApiScript';\r\n    script.async = true;\r\n    script.defer = true;\r\n\r\n    return script;\r\n  }\r\n\r\n  /**\r\n   * Returns a script source from a config.\r\n   * @param config parameters to add to a source\r\n   * @example\r\n   * // returns 'https://api-maps.yandex.ru/2.1/?apikey=658f67a2-fd77-42e9-b99e-2bd48c4ccad4&lang=en_US'\r\n   * getScriptSource({ apikey: '658f67a2-fd77-42e9-b99e-2bd48c4ccad4', lang: 'en_US' })\r\n   */\r\n  private getScriptSource(config: YConfig): string {\r\n    const params = this.convertConfigIntoQueryParams(config);\r\n\r\n    return `https://api-maps.yandex.ru/v3/?${params}`;\r\n  }\r\n\r\n  /**\r\n   * Converts a config into query string parameters.\r\n   * @param config object to convert\r\n   * @example\r\n   * // returns \"lang=ru_RU&apikey=XXX\"\r\n   * convertIntoQueryParams({ lang: 'ru_RU', apikey: 'XXX' })\r\n   */\r\n  private convertConfigIntoQueryParams(config: YConfig): string {\r\n    return Object.entries(config)\r\n      .map(([key, value]) => `${key}=${value}`)\r\n      .join('&');\r\n  }\r\n}\r\n","/**\r\n * Generates a random string based on Date in hexadecimal numeral system.\r\n * @example f175517fa4f3\r\n * @internal\r\n */\r\nexport const generateRandomId = (): string => `f${Date.now().toString(16)}`;\r\n","import type { AfterViewInit, ElementRef, OnChanges, OnDestroy, SimpleChanges } from '@angular/core';\r\nimport {\r\n  ChangeDetectionStrategy,\r\n  Component,\r\n  EventEmitter,\r\n  inject,\r\n  Input,\r\n  NgZone,\r\n  Output,\r\n  ViewChild,\r\n} from '@angular/core';\r\nimport type { YMap, YMapEntity, YMapProps } from '@yandex/ymaps3-types';\r\nimport { BehaviorSubject, Subject, takeUntil } from 'rxjs';\r\n\r\nimport { YApiLoaderService } from '../../../services/y-api-loader/y-api-loader.service';\r\nimport type { YReadyEvent } from '../../../types/y-ready-event';\r\nimport { generateRandomId } from '../../../utils/generate-random-id/generate-random-id';\r\n\r\n/**\r\n * This component wraps the [ymaps3.YMap](https://yandex.ru/dev/jsapi30/doc/ru/ref/#class-ymap) class from the Yandex.Maps API.\r\n * All component inputs are named the same as the API class constructor arguments.\r\n *\r\n * ```html\r\n * <y-map\r\n *   [props]=\"{\r\n *     location: {\r\n *       center: [-0.127696, 51.507351],\r\n *       zoom: 10,\r\n *     },\r\n *     theme: 'dark',\r\n *   }\"\r\n * >\r\n *   <y-map-default-scheme-layer />\r\n * </y-map>\r\n * ```\r\n */\r\n@Component({\r\n  selector: 'y-map',\r\n  template: '<div #container></div>',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class YMapComponent implements AfterViewInit, OnChanges, OnDestroy {\r\n  private readonly yaApiLoaderService = inject(YApiLoaderService);\r\n  private readonly ngZone = inject(NgZone);\r\n\r\n  @ViewChild('container') readonly container!: ElementRef;\r\n\r\n  private readonly destroy$ = new Subject<void>();\r\n\r\n  map$ = new BehaviorSubject<YMap | null>(null);\r\n\r\n  /**\r\n   * See the API entity documentation for detailed information. Supports updates.\r\n   * {@link https://yandex.ru/dev/jsapi30/doc/ru/ref/#YMapProps}\r\n   */\r\n  @Input({ required: true }) props!: YMapProps;\r\n\r\n  /**\r\n   * See the API entity documentation for detailed information.\r\n   */\r\n  @Input() children?: YMapEntity<unknown, object>[];\r\n\r\n  /**\r\n   * The entity instance is created. This event runs outside an Angular zone.\r\n   */\r\n  @Output() ready: EventEmitter<YReadyEvent<YMap>> = new EventEmitter<YReadyEvent<YMap>>();\r\n\r\n  ngAfterViewInit() {\r\n    this.yaApiLoaderService\r\n      .load()\r\n      .pipe(takeUntil(this.destroy$))\r\n      .subscribe(() => {\r\n        const id = generateRandomId();\r\n        const map = this.createMap(id);\r\n\r\n        /**\r\n         * Once the configuration is changed, e.g. language,\r\n         * we need to reinitialize the map.\r\n         */\r\n        if (this.map$.value) {\r\n          this.map$.value.destroy();\r\n        }\r\n\r\n        this.map$.next(map);\r\n        this.ready.emit({ ymaps3, entity: map });\r\n      });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    // It must be run outside a zone; otherwise, all async events within this call will cause ticks.\r\n    this.ngZone.runOutsideAngular(() => {\r\n      if (this.map$.value) {\r\n        this.map$.value.update(changes['props'].currentValue);\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.map$.value?.destroy();\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  private createMap(containerId: string): YMap {\r\n    const containerElem: HTMLElement = this.container.nativeElement;\r\n\r\n    containerElem.setAttribute('id', containerId);\r\n    containerElem.style.cssText = 'width: 100%; height: 100%;';\r\n\r\n    // The API mutates the configuration.\r\n    // It changes `props.config`, which causes errors on language change.\r\n    // Since we need to pass a clean state each time, pass a copy.\r\n    const clonedProps = { ...this.props };\r\n\r\n    return new ymaps3.YMap(containerElem, clonedProps, this.children);\r\n  }\r\n}\r\n","import type {\r\n  AfterContentInit,\r\n  OnChanges,\r\n  OnDestroy,\r\n  SimpleChanges,\r\n  TemplateRef,\r\n} from '@angular/core';\r\nimport {\r\n  ContentChild,\r\n  Directive,\r\n  EventEmitter,\r\n  inject,\r\n  Input,\r\n  NgZone,\r\n  Output,\r\n} from '@angular/core';\r\nimport type { LngLat } from '@yandex/ymaps3-types/common/types';\r\nimport type {\r\n  Feature,\r\n  YMapClusterer,\r\n  YMapClustererProps,\r\n} from '@yandex/ymaps3-types/packages/clusterer';\r\nimport { from, Subject, takeUntil, tap } from 'rxjs';\r\nimport { filter, switchMap } from 'rxjs/operators';\r\n\r\nimport type { Optional } from '../../../types/utilities/optional';\r\nimport type { YReadyEvent } from '../../../types/y-ready-event';\r\nimport { YMapComponent } from '../y-map/y-map.component';\r\n\r\n/**\r\n * This component wraps the [ymaps3.YMapClusterer](https://yandex.ru/dev/jsapi30/doc/ru/ref/packages/clusterer/#class-ymapclusterer) class from the Yandex.Maps API.\r\n * All component inputs are named the same as the API class constructor arguments.\r\n * This component is from the `@yandex/ymaps3-clusterer@0.0.1` package, which is asynchronously loaded when you use this component.\r\n *\r\n * The Yandex.Maps class is quite challenging, so I recommend checking the official documentation.\r\n * The component encapsulates some logic, making the class easier to use.\r\n * It remains fully customizable, and you can replicate the entire code from the official example.\r\n *\r\n * The Yandex.Maps class accepts `cluster` and `marker` callbacks that should return HTML for the elements.\r\n * You can achieve the same behavior using this component in two ways:\r\n *\r\n * 1. Pass cluster and marker to props and write completely custom logic. This is the same process that the library handles internally.\r\n * 2. Use `<ng-template #cluster let-context>` and `<ng-template #marker let-context>`, where the HTML from the templates is passed to `YMapMarker`.\r\n *\r\n * When using templates, you can access arguments from the callback through the `$implicit` variable.\r\n *\r\n * To define markers, you do not need to create the markers themselves; instead, you need to pass a `Feature[]`.\r\n * The official example creates an array of coordinates and maps it to the features array.\r\n *\r\n * The clustering method is `clusterByGrid({ gridSize: 64 })` by default, but you can override it and other options by passing them to `props`.\r\n *\r\n * ```html\r\n * <y-map\r\n *   [props]=\"{\r\n *     location: {\r\n *       center: [-0.127696, 51.507351],\r\n *       zoom: 10,\r\n *     },\r\n *   }\"\r\n * >\r\n *   <y-map-default-scheme-layer />\r\n *   <y-map-default-features-layer />\r\n *\r\n *   <!-- Define your coordinates in the component and map them to Feature[] -->\r\n *   <y-map-clusterer\r\n *     [props]=\"{\r\n *       features: [\r\n *         {\r\n *           type: 'Feature',\r\n *           id: '0',\r\n *           geometry: {\r\n *             type: 'Point',\r\n *             coordinates: [-0.597696, 51.907351],\r\n *           },\r\n *         },\r\n *       ],\r\n *     }\"\r\n *   >\r\n *     <ng-template #marker let-context>\r\n *       <!-- Your custom HTML for a point/marker -->\r\n *       <img src=\"./pin.svg\" />\r\n *     </ng-template>\r\n *\r\n *     <ng-template #cluster let-context>\r\n *       <!-- Your custom HTML for a clusterer point/marker -->\r\n *       {{ context.features.length }}\r\n *     </ng-template>\r\n *   </y-map-clusterer>\r\n * </y-map>\r\n * ```\r\n */\r\n@Directive({\r\n  selector: 'y-map-clusterer',\r\n})\r\nexport class YMapClustererDirective implements AfterContentInit, OnDestroy, OnChanges {\r\n  private readonly ngZone = inject(NgZone);\r\n  private readonly yMapComponent = inject(YMapComponent);\r\n\r\n  @ContentChild('marker') markerTemplate?: TemplateRef<{\r\n    $implicit: Feature;\r\n  }>;\r\n\r\n  @ContentChild('cluster') clusterTemplate?: TemplateRef<{\r\n    $implicit: {\r\n      coordinates: LngLat;\r\n      features: Feature[];\r\n    };\r\n  }>;\r\n\r\n  private readonly destroy$ = new Subject<void>();\r\n\r\n  private clusterer?: YMapClusterer;\r\n\r\n  /**\r\n   * Read the component description and see the API entity documentation for detailed information. Supports ngOnChanges.\r\n   * {@link https://yandex.ru/dev/jsapi30/doc/ru/ref/packages/clusterer/#YMapClustererProps}\r\n   */\r\n  @Input({ required: true }) props!: Optional<YMapClustererProps, 'marker' | 'cluster' | 'method'>;\r\n\r\n  /**\r\n   * The entity instance is created. This event runs outside an Angular zone.\r\n   */\r\n  @Output() ready: EventEmitter<YReadyEvent<YMapClusterer>> = new EventEmitter<\r\n    YReadyEvent<YMapClusterer>\r\n  >();\r\n\r\n  ngAfterContentInit() {\r\n    this.yMapComponent.map$\r\n      .pipe(\r\n        filter(Boolean),\r\n        switchMap((map) =>\r\n          // It's safe to call it each time, the Yandex.Maps API handles multiple requests under the hood.\r\n          from(ymaps3.import('@yandex/ymaps3-clusterer@0.0.1')).pipe(\r\n            tap(({ YMapClusterer, clusterByGrid }) => {\r\n              const marker = (feature: Feature) => {\r\n                const element = this.getTemplateElement(this.markerTemplate, feature);\r\n\r\n                return new ymaps3.YMapMarker(\r\n                  {\r\n                    coordinates: feature.geometry.coordinates,\r\n                  },\r\n                  element,\r\n                );\r\n              };\r\n\r\n              const cluster = (coordinates: LngLat, features: Feature[]) => {\r\n                const element = this.getTemplateElement(this.clusterTemplate, {\r\n                  coordinates,\r\n                  features,\r\n                });\r\n\r\n                return new ymaps3.YMapMarker(\r\n                  {\r\n                    coordinates,\r\n                  },\r\n                  element,\r\n                );\r\n              };\r\n\r\n              this.clusterer = new YMapClusterer({\r\n                marker,\r\n                cluster,\r\n                method: clusterByGrid({ gridSize: 64 }),\r\n                ...this.props,\r\n              });\r\n\r\n              map.addChild(this.clusterer);\r\n              this.ready.emit({ ymaps3, entity: this.clusterer });\r\n            }),\r\n          ),\r\n        ),\r\n        takeUntil(this.destroy$),\r\n      )\r\n      .subscribe();\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    // It must be run outside a zone; otherwise, all async events within this call will cause ticks.\r\n    this.ngZone.runOutsideAngular(() => {\r\n      if (this.clusterer) {\r\n        this.clusterer.update(changes['props'].currentValue);\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.clusterer) {\r\n      this.yMapComponent.map$.value?.removeChild(this.clusterer);\r\n    }\r\n\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  private getTemplateElement(\r\n    templateRef: TemplateRef<unknown> | undefined,\r\n    context: unknown,\r\n  ): HTMLElement {\r\n    if (!templateRef) {\r\n      throw new Error('TemplateRef cannot be undefined. It must be projected to the component.');\r\n    }\r\n\r\n    const view = templateRef.createEmbeddedView({ $implicit: context });\r\n\r\n    view.detectChanges();\r\n\r\n    // Get the first node, which is inside <ng-template />\r\n    const element = view.rootNodes[0];\r\n\r\n    if (!element) {\r\n      throw new Error('TemplateRef cannot be empty. It must contain a node.');\r\n    }\r\n\r\n    return element;\r\n  }\r\n}\r\n","import type { OnChanges, OnDestroy, OnInit, SimpleChanges } from '@angular/core';\r\nimport { Directive, EventEmitter, inject, Input, NgZone, Output } from '@angular/core';\r\nimport type {\r\n  YMapDefaultMarker,\r\n  YMapDefaultMarkerProps,\r\n} from '@yandex/ymaps3-types/packages/markers';\r\nimport { from, Subject, takeUntil, tap } from 'rxjs';\r\nimport { filter, switchMap } from 'rxjs/operators';\r\n\r\nimport type { YReadyEvent } from '../../../types/y-ready-event';\r\nimport { YMapComponent } from '../y-map/y-map.component';\r\n\r\n/**\r\n * This component wraps the [ymaps3.YMapDefaultMarker](https://yandex.ru/dev/jsapi30/doc/ru/ref/packages/markers/#class-ymapdefaultmarker) class from the Yandex.Maps API.\r\n * All component inputs are named the same as the API class constructor arguments.\r\n * This component is from the `@yandex/ymaps3-markers@0.0.1` package, which is asynchronously loaded when you use this component.\r\n *\r\n * ```html\r\n * <y-map\r\n *   [props]=\"{\r\n *     location: {\r\n *       center: [-0.127696, 51.507351],\r\n *       zoom: 10,\r\n *     },\r\n *   }\"\r\n * >\r\n *   <y-map-default-scheme-layer />\r\n *   <y-map-default-features-layer />\r\n *\r\n *   <y-map-default-marker\r\n *     [props]=\"{\r\n *       coordinates: [-0.127696, 51.507351],\r\n *       title: 'Hello World!',\r\n *       subtitle: 'kind and bright',\r\n *       color: 'blue',\r\n *     }\"\r\n *   />\r\n * </y-map>\r\n * ```\r\n */\r\n@Directive({\r\n  selector: 'y-map-default-marker',\r\n})\r\nexport class YMapDefaultMarkerDirective implements OnInit, OnDestroy, OnChanges {\r\n  private readonly ngZone = inject(NgZone);\r\n  private readonly yMapComponent = inject(YMapComponent);\r\n\r\n  private readonly destroy$ = new Subject<void>();\r\n\r\n  private marker?: YMapDefaultMarker;\r\n\r\n  /**\r\n   * See the API entity documentation for detailed information. Supports ngOnChanges.\r\n   * {@link https://yandex.ru/dev/jsapi30/doc/en/ref/packages/markers/#YMapDefaultMarkerProps}\r\n   */\r\n  @Input({ required: true }) props!: YMapDefaultMarkerProps;\r\n\r\n  /**\r\n   * The entity instance is created. This event runs outside an Angular zone.\r\n   */\r\n  @Output() ready: EventEmitter<YReadyEvent<YMapDefaultMarker>> = new EventEmitter<\r\n    YReadyEvent<YMapDefaultMarker>\r\n  >();\r\n\r\n  ngOnInit() {\r\n    this.yMapComponent.map$\r\n      .pipe(\r\n        filter(Boolean),\r\n        switchMap((map) =>\r\n          // It's safe to call it each time, the Yandex.Maps API handles multiple requests under the hood.\r\n          from(ymaps3.import('@yandex/ymaps3-markers@0.0.1')).pipe(\r\n            tap(({ YMapDefaultMarker }) => {\r\n              this.marker = new YMapDefaultMarker(this.props);\r\n              map.addChild(this.marker);\r\n              this.ready.emit({ ymaps3, entity: this.marker });\r\n            }),\r\n          ),\r\n        ),\r\n        takeUntil(this.destroy$),\r\n      )\r\n      .subscribe();\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    // It must be run outside a zone; otherwise, all async events within this call will cause ticks.\r\n    this.ngZone.runOutsideAngular(() => {\r\n      if (this.marker) {\r\n        this.marker.update(changes['props'].currentValue);\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.marker) {\r\n      this.yMapComponent.map$.value?.removeChild(this.marker);\r\n    }\r\n\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","import type { OnChanges, OnDestroy, OnInit, SimpleChanges } from '@angular/core';\r\nimport { Directive, EventEmitter, inject, Input, NgZone, Output } from '@angular/core';\r\nimport type { YMapFeature, YMapFeatureProps } from '@yandex/ymaps3-types';\r\nimport { Subject, takeUntil } from 'rxjs';\r\nimport { filter } from 'rxjs/operators';\r\n\r\nimport type { YReadyEvent } from '../../../types/y-ready-event';\r\nimport { YMapComponent } from '../y-map/y-map.component';\r\n\r\n/**\r\n * This component wraps the [ymaps3.YMapFeature](https://yandex.ru/dev/jsapi30/doc/en/ref/#class-ymapfeature) class from the Yandex.Maps API.\r\n * All component inputs are named the same as the API class constructor arguments.\r\n *\r\n * ```html\r\n * <y-map\r\n *   [props]=\"{\r\n *     location: {\r\n *       center: [-0.127696, 51.507351],\r\n *       zoom: 9,\r\n *     },\r\n *   }\"\r\n * >\r\n *   <y-map-default-scheme-layer />\r\n *   <y-map-default-features-layer />\r\n *\r\n *   <y-map-feature\r\n *     [props]=\"{\r\n *       geometry: {\r\n *         type: 'Polygon',\r\n *         coordinates: [\r\n *           [\r\n *             [-0.557696, 51.727351],\r\n *             [0.302304, 51.727351],\r\n *             [0.302304, 51.237351],\r\n *             [-0.557696, 51.237351],\r\n *           ],\r\n *         ],\r\n *       },\r\n *       style: {\r\n *         stroke: [{ color: '#006efc', width: 4, dash: [5, 10] }],\r\n *         fill: 'rgba(56, 56, 219, 0.5)',\r\n *       },\r\n *     }\"\r\n *   />\r\n * </y-map>\r\n * ```\r\n */\r\n@Directive({\r\n  selector: 'y-map-feature',\r\n})\r\nexport class YMapFeatureDirective implements OnInit, OnDestroy, OnChanges {\r\n  private readonly ngZone = inject(NgZone);\r\n  private readonly yMapComponent = inject(YMapComponent);\r\n\r\n  private readonly destroy$ = new Subject<void>();\r\n\r\n  private feature?: YMapFeature;\r\n\r\n  /**\r\n   * See the API entity documentation for detailed information. Supports ngOnChanges.\r\n   * {@link https://yandex.ru/dev/jsapi30/doc/en/ref/#YMapFeatureProps}\r\n   */\r\n  @Input({ required: true }) props!: YMapFeatureProps;\r\n\r\n  /**\r\n   * The entity instance is created. This event runs outside an Angular zone.\r\n   */\r\n  @Output() ready: EventEmitter<YReadyEvent<YMapFeature>> = new EventEmitter<\r\n    YReadyEvent<YMapFeature>\r\n  >();\r\n\r\n  ngOnInit() {\r\n    this.yMapComponent.map$.pipe(filter(Boolean), takeUntil(this.destroy$)).subscribe((map) => {\r\n      this.feature = new ymaps3.YMapFeature(this.props);\r\n      map.addChild(this.feature);\r\n      this.ready.emit({ ymaps3, entity: this.feature });\r\n    });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    // It must be run outside a zone; otherwise, all async events within this call will cause ticks.\r\n    this.ngZone.runOutsideAngular(() => {\r\n      if (this.feature) {\r\n        this.feature.update(changes['props'].currentValue);\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.feature) {\r\n      this.yMapComponent.map$.value?.removeChild(this.feature);\r\n    }\r\n\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","import type { OnChanges, OnDestroy, OnInit, SimpleChanges } from '@angular/core';\r\nimport { Directive, EventEmitter, inject, Input, NgZone, Output } from '@angular/core';\r\nimport type { YMapFeatureDataSource, YMapFeatureDataSourceProps } from '@yandex/ymaps3-types';\r\nimport { Subject, takeUntil } from 'rxjs';\r\nimport { filter } from 'rxjs/operators';\r\n\r\nimport type { YReadyEvent } from '../../../types/y-ready-event';\r\nimport { YMapComponent } from '../y-map/y-map.component';\r\n\r\n/**\r\n * This component wraps the [ymaps3.YMapFeatureDataSource](https://yandex.ru/dev/jsapi30/doc/ru/ref/#class-ymapfeaturedatasource) class from the Yandex.Maps API.\r\n * All component inputs are named the same as the API class constructor arguments.\r\n *\r\n * ```html\r\n * <y-map\r\n *   [props]=\"{\r\n *     location: {\r\n *       center: [-0.127696, 51.507351],\r\n *       zoom: 9,\r\n *     },\r\n *   }\"\r\n * >\r\n *   <y-map-feature-data-source [props]=\"{ id: 'clusterer-source' }\" />\r\n * </y-map>\r\n * ```\r\n */\r\n@Directive({\r\n  selector: 'y-map-feature-data-source',\r\n})\r\nexport class YMapFeatureDataSourceDirective implements OnInit, OnDestroy, OnChanges {\r\n  private readonly ngZone = inject(NgZone);\r\n  private readonly yMapComponent = inject(YMapComponent);\r\n\r\n  private readonly destroy$ = new Subject<void>();\r\n\r\n  private source?: YMapFeatureDataSource;\r\n\r\n  /**\r\n   * See the API entity documentation for detailed information. Supports ngOnChanges.\r\n   * {@link https://yandex.ru/dev/jsapi30/doc/ru/ref/#YMapFeatureDataSourceProps}\r\n   */\r\n  @Input({ required: true }) props!: YMapFeatureDataSourceProps;\r\n\r\n  /**\r\n   * The entity instance is created. This event runs outside an Angular zone.\r\n   */\r\n  @Output() ready: EventEmitter<YReadyEvent<YMapFeatureDataSource>> = new EventEmitter<\r\n    YReadyEvent<YMapFeatureDataSource>\r\n  >();\r\n\r\n  ngOnInit() {\r\n    this.yMapComponent.map$.pipe(filter(Boolean), takeUntil(this.destroy$)).subscribe((map) => {\r\n      this.source = new ymaps3.YMapFeatureDataSource(this.props);\r\n      map.addChild(this.source);\r\n      this.ready.emit({ ymaps3, entity: this.source });\r\n    });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    // It must be run outside a zone; otherwise, all async events within this call will cause ticks.\r\n    this.ngZone.runOutsideAngular(() => {\r\n      if (this.source) {\r\n        this.source.update(changes['props'].currentValue);\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.source) {\r\n      this.yMapComponent.map$.value?.removeChild(this.source);\r\n    }\r\n\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","import type { AfterContentInit, OnChanges, OnDestroy, SimpleChanges } from '@angular/core';\r\nimport {\r\n  ContentChild,\r\n  Directive,\r\n  EventEmitter,\r\n  inject,\r\n  Input,\r\n  NgZone,\r\n  Output,\r\n  TemplateRef,\r\n} from '@angular/core';\r\nimport type { DomDetach } from '@yandex/ymaps3-types/imperative/DomContext';\r\nimport type { YMapHint, YMapHintContext } from '@yandex/ymaps3-types/packages/hint';\r\nimport { from, Subject, takeUntil, tap } from 'rxjs';\r\nimport { filter, switchMap } from 'rxjs/operators';\r\n\r\nimport type { YMapHintProps } from '../../../types/y-map-hint-props';\r\nimport type { YReadyEvent } from '../../../types/y-ready-event';\r\nimport { YMapComponent } from '../y-map/y-map.component';\r\n\r\n/**\r\n * This component wraps the [ymaps3.YMapHint](https://yandex.ru/dev/jsapi30/doc/ru/ref/packages/hint/#class-ymaphint) class from the Yandex.Maps API.\r\n * All component inputs are named the same as the API class constructor arguments.\r\n * This component is from the `@yandex/ymaps3-hint@0.0.1` package, which is asynchronously loaded when you use this component.\r\n *\r\n * The API of this component is complicated, but it's very close to what the official React wrapper suggests.\r\n * We strongly recommend reading and understanding the [official React example](https://yandex.ru/dev/jsapi30/doc/ru/examples/cases/hints) for this component.\r\n *\r\n * In a nutshell, each entity (YMapFeature, YMapMarker, YMapHotspot) has a `properties` property, which is `Record<string, unknown>`.\r\n * When you define these components, you can pass any metadata to this property, which you can later access using `YMapHintProps['hint']`.\r\n * When you pass a callback to `YMapHintProps['hint']`, you can read the `properties` property and return the hint based on the metadata.\r\n * What you return from `YMapHintProps['hint']` will be available in `<ng-template />` (it's set via $implicit, so you can use any name for let-*).\r\n *\r\n * ```html\r\n * <y-map\r\n *   [props]=\"{\r\n *     location: {\r\n *       center: [-0.127696, 51.507351],\r\n *       zoom: 9,\r\n *     },\r\n *   }\"\r\n * >\r\n *   <y-map-default-scheme-layer />\r\n *   <y-map-default-features-layer />\r\n *\r\n *   <!-- onHint = (object?: YMapFeature | YMapMarker | YMapHotspot) => object?.properties?.['anyNameKey']; -->\r\n *   <!-- It accepts an entity on which a user hovered and returns a context, which is set to $implicit in ng-template. -->\r\n *   <!-- Your function can return anything since we have access to the returned value. -->\r\n *   <y-map-hint [props]=\"{ hint: onHint }\">\r\n *     <ng-template let-context>\r\n *       <div\r\n *         style=\"\r\n *           background-color: #fff;\r\n *           border-radius: 6px;\r\n *           padding: 3px 6px 4px;\r\n *           margin-left: 15px;\r\n *         \"\r\n *       >\r\n *         <!-- context.hint is the return value of onHint -->\r\n *         {{ context?.hint }}\r\n *       </div>\r\n *     </ng-template>\r\n *   </y-map-hint>\r\n *\r\n *   <y-map-default-marker\r\n *     [props]=\"{\r\n *       coordinates: [-0.127696, 51.507351],\r\n *       properties: {\r\n *         anyNameKey: 'Central London',\r\n *       },\r\n *     }\"\r\n *   />\r\n * </y-map>\r\n * ```\r\n */\r\n@Directive({\r\n  selector: 'y-map-hint',\r\n})\r\nexport class YMapHintDirective implements AfterContentInit, OnChanges, OnDestroy {\r\n  private readonly ngZone = inject(NgZone);\r\n  private readonly yMapComponent = inject(YMapComponent);\r\n\r\n  @ContentChild(TemplateRef) template?: TemplateRef<any>;\r\n\r\n  private readonly destroy$ = new Subject<void>();\r\n\r\n  private hint?: YMapHint;\r\n\r\n  /**\r\n   * See the API entity documentation for detailed information. Supports ngOnChanges.\r\n   * {@link https://yandex.ru/dev/jsapi30/doc/ru/ref/packages/hint/#YMapHintProps}\r\n   */\r\n  @Input({ required: true }) props!: YMapHintProps;\r\n\r\n  /**\r\n   * The entity instance is created. This event runs outside an Angular zone.\r\n   */\r\n  @Output() ready: EventEmitter<YReadyEvent<YMapHint>> = new EventEmitter<YReadyEvent<YMapHint>>();\r\n\r\n  ngAfterContentInit() {\r\n    this.yMapComponent.map$\r\n      .pipe(\r\n        filter(Boolean),\r\n        switchMap((map) =>\r\n          // It's safe to call it each time, the Yandex.Maps API handles multiple requests under the hood.\r\n          from(ymaps3.import('@yandex/ymaps3-hint@0.0.1')).pipe(\r\n            tap(({ YMapHint, YMapHintContext }) => {\r\n              if (!this.template) {\r\n                throw new Error(\r\n                  'TemplateRef cannot be undefined. It must be projected to the component.',\r\n                );\r\n              }\r\n\r\n              this.hint = new YMapHint(this.props);\r\n              this.hint.addChild(this.createHintContainer(this.template, YMapHintContext));\r\n              map.addChild(this.hint);\r\n              this.ready.emit({ ymaps3, entity: this.hint });\r\n            }),\r\n          ),\r\n        ),\r\n        takeUntil(this.destroy$),\r\n      )\r\n      .subscribe();\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    // It must be run outside a zone; otherwise, all async events within this call will cause ticks.\r\n    this.ngZone.runOutsideAngular(() => {\r\n      if (this.hint) {\r\n        this.hint.update(changes['props'].currentValue);\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.hint) {\r\n      this.yMapComponent.map$.value?.removeChild(this.hint);\r\n    }\r\n\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  /**\r\n   * To render a hint, a container is required.\r\n   * This method isolates all the container creation logic and returns the entity.\r\n   */\r\n  private createHintContainer(\r\n    templateRef: TemplateRef<any>,\r\n    _YMapHintContext: typeof YMapHintContext,\r\n  ) {\r\n    // The main logic is taken from the official documentation.\r\n    // See https://yandex.ru/dev/jsapi30/doc/ru/ref/packages/hint/#class-ymaphint\r\n    class HintContainer extends ymaps3.YMapGroupEntity<any> {\r\n      _element?: Element;\r\n      _detachDom?: DomDetach;\r\n\r\n      override _onAttach() {\r\n        // Create a view with an empty context to get a basic HTML layout.\r\n        const view = templateRef.createEmbeddedView({ $implicit: null });\r\n\r\n        view.detectChanges();\r\n\r\n        // Get the first node, which is inside <ng-template />\r\n        this._element = view.rootNodes[0];\r\n\r\n        if (!this._element) {\r\n          throw new Error('TemplateRef cannot be empty. It must contain a node.');\r\n        }\r\n\r\n        this._detachDom = ymaps3.useDomContext(this, this._element, null);\r\n\r\n        this._watchContext(\r\n          _YMapHintContext,\r\n          () => {\r\n            // Provide the hint context to the <ng-template /> component.\r\n            // This context can be either null, or { hint: any }.\r\n            // The value inside the context depends on YMapHintProps['hint'] value.\r\n            view.context.$implicit = this._consumeContext(_YMapHintContext);\r\n            view.detectChanges();\r\n          },\r\n          { immediate: true },\r\n        );\r\n      }\r\n\r\n      override _onDetach() {\r\n        if (this._detachDom) {\r\n          this._detachDom();\r\n        }\r\n\r\n        this._detachDom = undefined;\r\n      }\r\n    }\r\n\r\n    return new HintContainer({});\r\n  }\r\n}\r\n","import type { OnChanges, OnDestroy, OnInit, SimpleChanges } from '@angular/core';\r\nimport { Directive, EventEmitter, inject, Input, NgZone, Output } from '@angular/core';\r\nimport type { YMapListener, YMapListenerProps } from '@yandex/ymaps3-types';\r\nimport { Subject, takeUntil } from 'rxjs';\r\nimport { filter } from 'rxjs/operators';\r\n\r\nimport type { YReadyEvent } from '../../../types/y-ready-event';\r\nimport { YMapComponent } from '../y-map/y-map.component';\r\n\r\n/**\r\n * This component wraps the [ymaps3.YMapListener](https://yandex.ru/dev/jsapi30/doc/en/ref/#class-ymaplistener) class from the Yandex.Maps API.\r\n * All component inputs are named the same as the API class constructor arguments.\r\n *\r\n * ```html\r\n * <y-map\r\n *   [props]=\"{\r\n *     location: {\r\n *       center: [-0.127696, 51.507351],\r\n *       zoom: 9,\r\n *     },\r\n *   }\"\r\n * >\r\n *   <y-map-default-scheme-layer />\r\n *\r\n *   <y-map-listener\r\n *     [props]=\"{\r\n *       onClick: onClick,\r\n *     }\"\r\n *   />\r\n * </y-map>\r\n * ```\r\n */\r\n@Directive({\r\n  selector: 'y-map-listener',\r\n})\r\nexport class YMapListenerDirective implements OnInit, OnChanges, OnDestroy {\r\n  private readonly ngZone = inject(NgZone);\r\n  private readonly yMapComponent = inject(YMapComponent);\r\n\r\n  private readonly destroy$ = new Subject<void>();\r\n\r\n  private listener?: YMapListener;\r\n\r\n  /**\r\n   * See the API entity documentation for detailed information. Supports ngOnChanges.\r\n   * {@link https://yandex.ru/dev/jsapi30/doc/en/ref/#YMapListenerProps}\r\n   */\r\n  @Input({ required: true }) props!: YMapListenerProps;\r\n\r\n  /**\r\n   * The entity instance is created. This event runs outside an Angular zone.\r\n   */\r\n  @Output() ready: EventEmitter<YReadyEvent<YMapListener>> = new EventEmitter<\r\n    YReadyEvent<YMapListener>\r\n  >();\r\n\r\n  ngOnInit() {\r\n    this.yMapComponent.map$.pipe(filter(Boolean), takeUntil(this.destroy$)).subscribe((map) => {\r\n      this.listener = new ymaps3.YMapListener(this.props);\r\n      map.addChild(this.listener);\r\n      this.ready.emit({ ymaps3, entity: this.listener });\r\n    });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    // It must be run outside a zone; otherwise, all async events within this call will cause ticks.\r\n    this.ngZone.runOutsideAngular(() => {\r\n      if (this.listener) {\r\n        this.listener.update(changes['props'].currentValue);\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.listener) {\r\n      this.yMapComponent.map$.value?.removeChild(this.listener);\r\n    }\r\n\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","import type { AfterViewInit, OnChanges, OnDestroy, SimpleChanges } from '@angular/core';\r\nimport { Directive, ElementRef, EventEmitter, inject, Input, NgZone, Output } from '@angular/core';\r\nimport type { YMapMarker, YMapMarkerProps } from '@yandex/ymaps3-types';\r\nimport { Subject, takeUntil } from 'rxjs';\r\nimport { filter } from 'rxjs/operators';\r\n\r\nimport type { YReadyEvent } from '../../../types/y-ready-event';\r\nimport { YMapComponent } from '../y-map/y-map.component';\r\n\r\n/**\r\n * This component wraps the [ymaps3.YMapMarker](https://yandex.ru/dev/jsapi30/doc/en/ref/#class-ymapmarker) class from the Yandex.Maps API.\r\n * All component inputs are named the same as the API class constructor arguments. `YMapMarker['element']` can only be projected, see the example below.\r\n *\r\n * ```html\r\n * <y-map\r\n *   [props]=\"{\r\n *     location: {\r\n *       center: [-0.127696, 51.507351],\r\n *       zoom: 9,\r\n *     },\r\n *   }\"\r\n * >\r\n *   <y-map-default-scheme-layer />\r\n *   <y-map-default-features-layer />\r\n *\r\n *   <y-map-marker\r\n *     [props]=\"{\r\n *       coordinates: [-0.127696, 51.507351],\r\n *       draggable: true,\r\n *     }\"\r\n *   >\r\n *     <img\r\n *       width=\"64\"\r\n *       height=\"64\"\r\n *       style=\"border-radius: 50%\"\r\n *       src=\"https://cdn.openart.ai/published/nI5hC8sFzqKnKbJtW1hA/ExVfxYNJ_E0Yh_256.webp\"\r\n *       alt=\"Bulldog\"\r\n *     />\r\n *   </y-map-marker>\r\n * </y-map>\r\n * ```\r\n */\r\n@Directive({\r\n  selector: 'y-map-marker',\r\n})\r\nexport class YMapMarkerDirective implements AfterViewInit, OnDestroy, OnChanges {\r\n  private readonly ngZone = inject(NgZone);\r\n  private readonly elementRef = inject<ElementRef<HTMLElement>>(ElementRef);\r\n  private readonly yMapComponent = inject(YMapComponent);\r\n\r\n  private readonly destroy$ = new Subject<void>();\r\n\r\n  private marker?: YMapMarker;\r\n\r\n  private element?: HTMLElement;\r\n\r\n  /**\r\n   * See the API entity documentation for detailed information. Supports ngOnChanges.\r\n   * {@link https://yandex.ru/dev/jsapi30/doc/ru/ref/#YMapMarkerProps}\r\n   */\r\n  @Input({ required: true }) props!: YMapMarkerProps;\r\n\r\n  /**\r\n   * The entity instance is created. This event runs outside an Angular zone.\r\n   */\r\n  @Output() ready: EventEmitter<YReadyEvent<YMapMarker>> = new EventEmitter<\r\n    YReadyEvent<YMapMarker>\r\n  >();\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    // It must be run outside a zone; otherwise, all async events within this call will cause ticks.\r\n    this.ngZone.runOutsideAngular(() => {\r\n      if (this.marker) {\r\n        this.marker.update(changes['props'].currentValue);\r\n      }\r\n    });\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.yMapComponent.map$.pipe(filter(Boolean), takeUntil(this.destroy$)).subscribe((map) => {\r\n      // ContentChild cannot be used without a selector.\r\n      // We do not have any selectors, and we do not want to force users to use them.\r\n      // All we need is an alternative to React children, just to get everything projected to the component.\r\n      // Using an element reference is probably the easiest solution for this.\r\n      if (!this.element) {\r\n        // It must be saved because the Yandex.Maps API deletes the element from the DOM.\r\n        // Therefore, after a configuration change, we pass null, since it's deleted.\r\n        this.element = this.elementRef.nativeElement.firstChild as HTMLElement;\r\n      }\r\n\r\n      this.marker = new ymaps3.YMapMarker(this.props, this.element);\r\n      map.addChild(this.marker);\r\n      this.ready.emit({ ymaps3, entity: this.marker });\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.marker) {\r\n      this.yMapComponent.map$.value?.removeChild(this.marker);\r\n    }\r\n\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","import type { OnChanges, OnDestroy, OnInit, SimpleChanges } from '@angular/core';\r\nimport { Directive, EventEmitter, inject, Input, NgZone, Output } from '@angular/core';\r\nimport type { YMapControls, YMapControlsProps, YMapEntity } from '@yandex/ymaps3-types';\r\nimport { BehaviorSubject, Subject, takeUntil } from 'rxjs';\r\nimport { filter } from 'rxjs/operators';\r\n\r\nimport type { YReadyEvent } from '../../../types/y-ready-event';\r\nimport { YMapComponent } from '../../common/y-map/y-map.component';\r\n\r\n/**\r\n * This component wraps the [ymaps3.YMapControls](https://yandex.ru/dev/jsapi30/doc/ru/ref/#class-ymapcontrols) class from the Yandex.Maps API.\r\n * All component inputs are named the same as the API class constructor arguments.\r\n *\r\n * ```html\r\n * <y-map\r\n *   [props]=\"{\r\n *     location: {\r\n *       center: [-0.127696, 51.507351],\r\n *       zoom: 9,\r\n *     },\r\n *   }\"\r\n * >\r\n *   <y-map-default-scheme-layer />\r\n *\r\n *   <y-map-controls [props]=\"{ position: 'top' }\">\r\n *     ...\r\n *   </y-map-controls>\r\n * </y-map>\r\n * ```\r\n */\r\n@Directive({\r\n  selector: 'y-map-controls',\r\n})\r\nexport class YMapControlsDirective implements OnInit, OnChanges, OnDestroy {\r\n  private readonly ngZone = inject(NgZone);\r\n  private readonly yMapComponent = inject(YMapComponent);\r\n\r\n  private readonly destroy$ = new Subject<void>();\r\n\r\n  controls$ = new BehaviorSubject<YMapControls | null>(null);\r\n\r\n  /**\r\n   * Controls properties. Supports ngOnChanges.\r\n   * {@link https://yandex.ru/dev/jsapi30/doc/ru/ref/#YMapControlsProps}\r\n   */\r\n  @Input({ required: true }) props!: YMapControlsProps;\r\n\r\n  /**\r\n   * See the API entity documentation for detailed information.\r\n   */\r\n  @Input() children?: YMapEntity<unknown, object>[];\r\n\r\n  /**\r\n   * The entity instance is created. This event runs outside an Angular zone.\r\n   */\r\n  @Output() ready: EventEmitter<YReadyEvent<YMapControls>> = new EventEmitter<\r\n    YReadyEvent<YMapControls>\r\n  >();\r\n\r\n  ngOnInit() {\r\n    this.yMapComponent.map$.pipe(filter(Boolean), takeUntil(this.destroy$)).subscribe((map) => {\r\n      const controls = new ymaps3.YMapControls(this.props, this.children);\r\n\r\n      map.addChild(controls);\r\n      this.controls$.next(controls);\r\n      this.ready.emit({ ymaps3, entity: controls });\r\n    });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    // It must be run outside a zone; otherwise, all async events within this call will cause ticks.\r\n    this.ngZone.runOutsideAngular(() => {\r\n      if (this.controls$.value) {\r\n        this.controls$.value.update(changes['props'].currentValue);\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.controls$.value) {\r\n      this.yMapComponent.map$.value?.removeChild(this.controls$.value);\r\n    }\r\n\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","import type { AfterViewInit, OnChanges, OnDestroy, SimpleChanges } from '@angular/core';\r\nimport { Directive, ElementRef, EventEmitter, inject, Input, NgZone, Output } from '@angular/core';\r\nimport type { DomDetach } from '@yandex/ymaps3-types/imperative/DomContext';\r\nimport type { YMapControl, YMapControlProps } from '@yandex/ymaps3-types/imperative/YMapControl';\r\nimport { Subject, takeUntil } from 'rxjs';\r\nimport { filter } from 'rxjs/operators';\r\n\r\nimport type { YReadyEvent } from '../../../types/y-ready-event';\r\nimport { YMapControlsDirective } from '../y-map-controls/y-map-controls.directive';\r\n\r\n/**\r\n * This component wraps the [ymaps3.YMapControl](https://yandex.ru/dev/jsapi30/doc/ru/ref/#class-ymapcontrol) class from the Yandex.Maps API.\r\n * All component inputs are named the same as the API class constructor arguments. This component must be used inside a `y-map-controls` component.\r\n * Custom HTML can only be projected, see the example below.\r\n *\r\n * ```html\r\n * <y-map\r\n *   [props]=\"{\r\n *     location: {\r\n *       center: [-0.127696, 51.507351],\r\n *       zoom: 9,\r\n *     },\r\n *   }\"\r\n * >\r\n *   <y-map-default-scheme-layer />\r\n *\r\n *   <y-map-controls [props]=\"{ position: 'top' }\">\r\n *     <y-map-control>\r\n *       <p>Custom HTML</p>\r\n *     </y-map-control>\r\n *   </y-map-controls>\r\n * </y-map>\r\n * ```\r\n */\r\n@Directive({\r\n  selector: 'y-map-control',\r\n})\r\nexport class YMapControlDirective implements AfterViewInit, OnChanges, OnDestroy {\r\n  private readonly ngZone = inject(NgZone);\r\n  private readonly elementRef = inject<ElementRef<HTMLElement>>(ElementRef);\r\n  private readonly yMapControlsDirective = inject(YMapControlsDirective);\r\n\r\n  private readonly destroy$ = new Subject<void>();\r\n\r\n  private control?: YMapControl;\r\n\r\n  private element?: HTMLElement;\r\n\r\n  /**\r\n   * See the API entity documentation for detailed information. Supports ngOnChanges.\r\n   * {@link https://yandex.ru/dev/jsapi30/doc/ru/ref/#YMapControlProps}\r\n   */\r\n  @Input() props: YMapControlProps = {};\r\n\r\n  /**\r\n   * The entity instance is created. This event runs outside an Angular zone.\r\n   */\r\n  @Output() ready: EventEmitter<YReadyEvent<YMapControl>> = new EventEmitter<\r\n    YReadyEvent<YMapControl>\r\n  >();\r\n\r\n  ngAfterViewInit() {\r\n    this.yMapControlsDirective.controls$\r\n      .pipe(filter(Boolean), takeUntil(this.destroy$))\r\n      .subscribe((controls) => {\r\n        // ContentChild cannot be used without a selector.\r\n        // We do not have any selectors, and we do not want to force users to use them.\r\n        // All we need is an alternative to React children, just to get everything projected to the component.\r\n        // Using an element reference is probably the easiest solution for this.\r\n        if (!this.element) {\r\n          // It must be saved because the Yandex.Maps API deletes the element from the DOM.\r\n          // Therefore, after a configuration change, we pass null, since it's deleted.\r\n          this.element = this.elementRef.nativeElement.firstChild as HTMLElement;\r\n        }\r\n\r\n        this.control = new ymaps3.YMapControl(this.props);\r\n        this.control.addChild(this.createControlContainer(this.element));\r\n        controls.addChild(this.control);\r\n        this.ready.emit({ ymaps3, entity: this.control });\r\n      });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    // It must be run outside a zone; otherwise, all async events within this call will cause ticks.\r\n    this.ngZone.runOutsideAngular(() => {\r\n      if (this.control) {\r\n        this.control.update(changes['props'].currentValue);\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.control) {\r\n      this.yMapControlsDirective.controls$.value?.removeChild(this.control);\r\n    }\r\n\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  /**\r\n   * To render a control, a container is required.\r\n   * This method isolates all the container creation logic and returns the entity.\r\n   */\r\n  private createControlContainer(element: HTMLElement) {\r\n    // This logic is taken from the official documentation.\r\n    // See https://yandex.ru/dev/jsapi30/doc/ru/ref/packages/hint/#class-ymaphint\r\n    class ControlContainer extends ymaps3.YMapGroupEntity<any> {\r\n      _element?: Element;\r\n      _detachDom?: DomDetach;\r\n\r\n      override _onAttach() {\r\n        this._element = element;\r\n        this._detachDom = ymaps3.useDomContext(this, this._element, null);\r\n      }\r\n\r\n      override _onDetach() {\r\n        if (this._detachDom) {\r\n          this._detachDom();\r\n        }\r\n\r\n        this._detachDom = undefined;\r\n      }\r\n    }\r\n\r\n    return new ControlContainer({});\r\n  }\r\n}\r\n","import type { OnChanges, OnDestroy, OnInit, SimpleChanges } from '@angular/core';\r\nimport { Directive, EventEmitter, inject, Input, NgZone, Output } from '@angular/core';\r\nimport type { YMap, YMapControlButton } from '@yandex/ymaps3-types';\r\nimport type { YMapControlCommonButtonProps } from '@yandex/ymaps3-types/imperative/YMapControl';\r\nimport { Subject, takeUntil } from 'rxjs';\r\nimport { filter } from 'rxjs/operators';\r\n\r\nimport type { ComplexOptions } from '../../../types/complex-options';\r\nimport type { YReadyEvent } from '../../../types/y-ready-event';\r\nimport { YMapControlsDirective } from '../y-map-controls/y-map-controls.directive';\r\n\r\n/**\r\n * This component wraps the [ymaps3.YMapControlButton](https://yandex.ru/dev/jsapi30/doc/ru/ref/#class-ymapcontrolbutton) class from the Yandex.Maps API.\r\n * All component inputs are named the same as the API class constructor arguments. This component must be used inside a `y-map-controls` component.\r\n *\r\n * ```html\r\n * <y-map\r\n *   [props]=\"{\r\n *     location: {\r\n *       center: [-0.127696, 51.507351],\r\n *       zoom: 9,\r\n *     },\r\n *   }\"\r\n * >\r\n *   <y-map-default-scheme-layer />\r\n *\r\n *   <y-map-controls [props]=\"{ position: 'top' }\">\r\n *     <y-map-control-button [props]=\"{ text: 'Hello' }\" />\r\n *   </y-map-controls>\r\n * </y-map>\r\n * ```\r\n */\r\n@Directive({\r\n  selector: 'y-map-control-button',\r\n})\r\nexport class YMapControlButtonDirective implements OnInit, OnChanges, OnDestroy {\r\n  private readonly ngZone = inject(NgZone);\r\n  private readonly yMapControlsDirective = inject(YMapControlsDirective);\r\n\r\n  private readonly destroy$ = new Subject<void>();\r\n\r\n  private control?: YMapControlButton;\r\n\r\n  /**\r\n   * See the API entity documentation for detailed information. Supports ngOnChanges.\r\n   * {@link https://yandex.ru/dev/jsapi30/doc/ru/ref/#YMapControlCommonButtonProps}\r\n   */\r\n  @Input({ required: true }) props!: YMapControlCommonButtonProps;\r\n\r\n  /**\r\n   * See the API entity documentation for detailed information.\r\n   */\r\n  @Input() options?: ComplexOptions<YMap>;\r\n\r\n  /**\r\n   * The entity instance is created. This event runs outside an Angular zone.\r\n   */\r\n  @Output() ready: EventEmitter<YReadyEvent<YMapControlButton>> = new EventEmitter<\r\n    YReadyEvent<YMapControlButton>\r\n  >();\r\n\r\n  ngOnInit() {\r\n    this.yMapControlsDirective.controls$\r\n      .pipe(filter(Boolean), takeUntil(this.destroy$))\r\n      .subscribe((controls) => {\r\n        this.control = new ymaps3.YMapControlButton(this.props, this.options);\r\n        controls.addChild(this.control);\r\n        this.ready.emit({ ymaps3, entity: this.control });\r\n      });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    // It must be run outside a zone; otherwise, all async events within this call will cause ticks.\r\n    this.ngZone.runOutsideAngular(() => {\r\n      if (this.control) {\r\n        this.control.update(changes['props'].currentValue);\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.control) {\r\n      this.yMapControlsDirective.controls$.value?.removeChild(this.control);\r\n    }\r\n\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","import type { OnChanges, OnDestroy, OnInit, SimpleChanges } from '@angular/core';\r\nimport { Directive, EventEmitter, inject, Input, NgZone, Output } from '@angular/core';\r\nimport type { YMap } from '@yandex/ymaps3-types';\r\nimport type {\r\n  YMapControlCommonButton,\r\n  YMapControlCommonButtonProps,\r\n} from '@yandex/ymaps3-types/imperative/YMapControl';\r\nimport { Subject, takeUntil } from 'rxjs';\r\nimport { filter } from 'rxjs/operators';\r\n\r\nimport type { ComplexOptions } from '../../../types/complex-options';\r\nimport type { YReadyEvent } from '../../../types/y-ready-event';\r\nimport { YMapControlsDirective } from '../y-map-controls/y-map-controls.directive';\r\n\r\n/**\r\n * This component wraps the [ymaps3.YMapControlCommonButton](https://yandex.ru/dev/jsapi30/doc/ru/ref/#class-ymapcontrolcommonbutton) class from the Yandex.Maps API.\r\n * All component inputs are named the same as the API class constructor arguments. This component must be used inside a `y-map-controls` component.\r\n *\r\n * ```html\r\n * <y-map\r\n *   [props]=\"{\r\n *     location: {\r\n *       center: [-0.127696, 51.507351],\r\n *       zoom: 9,\r\n *     },\r\n *   }\"\r\n * >\r\n *   <y-map-default-scheme-layer />\r\n *\r\n *   <y-map-controls [props]=\"{ position: 'top' }\">\r\n *     <y-map-control-common-button [props]=\"{ text: 'Hello' }\" />\r\n *   </y-map-controls>\r\n * </y-map>\r\n * ```\r\n */\r\n@Directive({\r\n  selector: 'y-map-control-common-button',\r\n})\r\nexport class YMapControlCommonButtonDirective implements OnInit, OnChanges, OnDestroy {\r\n  private readonly ngZone = inject(NgZone);\r\n  private readonly yMapControlsDirective = inject(YMapControlsDirective);\r\n\r\n  private readonly destroy$ = new Subject<void>();\r\n\r\n  private control?: YMapControlCommonButton;\r\n\r\n  /**\r\n   * Button properties. Supports ngOnChanges.\r\n   * {@link https://yandex.ru/dev/jsapi30/doc/ru/ref/#YMapControlCommonButtonProps}\r\n   */\r\n  @Input({ required: true }) props!: YMapControlCommonButtonProps;\r\n\r\n  /**\r\n   * See the API entity documentation for detailed information.\r\n   */\r\n  @Input() options?: ComplexOptions<YMap>;\r\n\r\n  /**\r\n   * The entity instance is created. This event runs outside an Angular zone.\r\n   */\r\n  @Output() ready: EventEmitter<YReadyEvent<YMapControlCommonButton>> = new EventEmitter<\r\n    YReadyEvent<YMapControlCommonButton>\r\n  >();\r\n\r\n  ngOnInit() {\r\n    this.yMapControlsDirective.controls$\r\n      .pipe(filter(Boolean), takeUntil(this.destroy$))\r\n      .subscribe((controls) => {\r\n        this.control = new ymaps3.YMapControlCommonButton(this.props, this.options);\r\n        controls.addChild(this.control);\r\n        this.ready.emit({ ymaps3, entity: this.control });\r\n      });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    // It must be run outside a zone; otherwise, all async events within this call will cause ticks.\r\n    this.ngZone.runOutsideAngular(() => {\r\n      if (this.control) {\r\n        this.control.update(changes['props'].currentValue);\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.control) {\r\n      this.yMapControlsDirective.controls$.value?.removeChild(this.control);\r\n    }\r\n\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","import type { OnChanges, OnDestroy, OnInit, SimpleChanges } from '@angular/core';\r\nimport { Directive, EventEmitter, inject, Input, NgZone, Output } from '@angular/core';\r\nimport type {\r\n  YMapGeolocationControl,\r\n  YMapGeolocationControlProps,\r\n} from '@yandex/ymaps3-types/packages/controls';\r\nimport { from, Subject, takeUntil, tap } from 'rxjs';\r\nimport { filter, switchMap } from 'rxjs/operators';\r\n\r\nimport type { YReadyEvent } from '../../../types/y-ready-event';\r\nimport { YMapControlsDirective } from '../y-map-controls/y-map-controls.directive';\r\n\r\n/**\r\n * This component wraps the [ymaps3.YMapGeolocationControl](https://yandex.ru/dev/jsapi30/doc/ru/ref/packages/controls/#class-ymapgeolocationcontrol) class from the Yandex.Maps API.\r\n * All component inputs are named the same as the API class constructor arguments. This component must be used inside a `y-map-controls` component.\r\n * This component is from the `@yandex/ymaps3-controls@0.0.1` package, which is asynchronously loaded when you use this component.\r\n *\r\n * ```html\r\n * <y-map\r\n *   [props]=\"{\r\n *     location: {\r\n *       center: [-0.127696, 51.507351],\r\n *       zoom: 9,\r\n *     },\r\n *   }\"\r\n * >\r\n *   <y-map-default-scheme-layer />\r\n *\r\n *   <y-map-controls [props]=\"{ position: 'top' }\">\r\n *     <y-map-geolocation-control />\r\n *   </y-map-controls>\r\n * </y-map>\r\n * ```\r\n */\r\n@Directive({\r\n  selector: 'y-map-geolocation-control',\r\n})\r\nexport class YMapGeolocationControlDirective implements OnInit, OnChanges, OnDestroy {\r\n  private readonly ngZone = inject(NgZone);\r\n  private readonly yMapControlsDirective = inject(YMapControlsDirective);\r\n\r\n  private readonly destroy$ = new Subject<void>();\r\n\r\n  private control?: YMapGeolocationControl;\r\n\r\n  /**\r\n   * See the API entity documentation for detailed information. Supports ngOnChanges.\r\n   * {@link https://yandex.ru/dev/jsapi30/doc/ru/ref/packages/controls/#YMapGeolocationControlProps}\r\n   */\r\n  @Input() props: YMapGeolocationControlProps = {};\r\n\r\n  /**\r\n   * The entity instance is created. This event runs outside an Angular zone.\r\n   */\r\n  @Output() ready: EventEmitter<YReadyEvent<YMapGeolocationControl>> = new EventEmitter<\r\n    YReadyEvent<YMapGeolocationControl>\r\n  >();\r\n\r\n  ngOnInit() {\r\n    this.yMapControlsDirective.controls$\r\n      .pipe(\r\n        filter(Boolean),\r\n        switchMap((controls) =>\r\n          // It's safe to call it each time, the Yandex.Maps API handles multiple requests under the hood.\r\n          from(ymaps3.import('@yandex/ymaps3-controls@0.0.1')).pipe(\r\n            tap(({ YMapGeolocationControl }) => {\r\n              this.control = new YMapGeolocationControl(this.props);\r\n              controls.addChild(this.control);\r\n              this.ready.emit({ ymaps3, entity: this.control });\r\n            }),\r\n          ),\r\n        ),\r\n        takeUntil(this.destroy$),\r\n      )\r\n      .subscribe();\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    // It must be run outside a zone; otherwise, all async events within this call will cause ticks.\r\n    this.ngZone.runOutsideAngular(() => {\r\n      if (this.control) {\r\n        this.control.update(changes['props'].currentValue);\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.control) {\r\n      this.yMapControlsDirective.controls$.value?.removeChild(this.control);\r\n    }\r\n\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","import type { OnChanges, OnDestroy, OnInit, SimpleChanges } from '@angular/core';\r\nimport { Directive, EventEmitter, inject, Input, NgZone, Output } from '@angular/core';\r\nimport type {\r\n  YMapOpenMapsButton,\r\n  YMapOpenMapsButtonProps,\r\n} from '@yandex/ymaps3-types/modules/controls-extra';\r\nimport { from, Subject, takeUntil, tap } from 'rxjs';\r\nimport { filter, switchMap } from 'rxjs/operators';\r\n\r\nimport type { YReadyEvent } from '../../../types/y-ready-event';\r\nimport { YMapControlsDirective } from '../y-map-controls/y-map-controls.directive';\r\n\r\n/**\r\n * This component wraps the [ymaps3.YMapOpenMapsButton](https://yandex.ru/dev/jsapi30/doc/ru/ref/modules/controls-extra/#class-ymapopenmapsbutton) class from the Yandex.Maps API.\r\n * All component inputs are named the same as the API class constructor arguments. This component must be used inside a `y-map-controls` component.\r\n * This component is from the `@yandex/ymaps3-controls-extra` module, which is asynchronously loaded when you use this component.\r\n *\r\n * ```html\r\n * <y-map\r\n *   [props]=\"{\r\n *     location: {\r\n *       center: [-0.127696, 51.507351],\r\n *       zoom: 9,\r\n *     },\r\n *   }\"\r\n * >\r\n *   <y-map-default-scheme-layer />\r\n *\r\n *   <y-map-controls [props]=\"{ position: 'top' }\">\r\n *     <y-map-open-maps-button />\r\n *   </y-map-controls>\r\n * </y-map>\r\n * ```\r\n */\r\n@Directive({\r\n  selector: 'y-map-open-maps-button',\r\n})\r\nexport class YMapOpenMapsButtonDirective implements OnInit, OnChanges, OnDestroy {\r\n  private readonly ngZone = inject(NgZone);\r\n  private readonly yMapControlsDirective = inject(YMapControlsDirective);\r\n\r\n  private readonly destroy$ = new Subject<void>();\r\n\r\n  private control?: YMapOpenMapsButton;\r\n\r\n  /**\r\n   * See the API entity documentation for detailed information. Supports ngOnChanges.\r\n   * {@link https://yandex.ru/dev/jsapi30/doc/ru/ref/modules/controls-extra/#YMapOpenMapsButtonProps}\r\n   */\r\n  @Input() props: YMapOpenMapsButtonProps = {};\r\n\r\n  /**\r\n   * The entity instance is created. This event runs outside an Angular zone.\r\n   */\r\n  @Output() ready: EventEmitter<YReadyEvent<YMapOpenMapsButton>> = new EventEmitter<\r\n    YReadyEvent<YMapOpenMapsButton>\r\n  >();\r\n\r\n  ngOnInit() {\r\n    this.yMapControlsDirective.controls$\r\n      .pipe(\r\n        filter(Boolean),\r\n        switchMap((controls) =>\r\n          // It's safe to call it each time, the Yandex.Maps API handles multiple requests under the hood.\r\n          from(ymaps3.import('@yandex/ymaps3-controls-extra')).pipe(\r\n            tap(({ YMapOpenMapsButton }) => {\r\n              this.control = new YMapOpenMapsButton(this.props);\r\n              controls.addChild(this.control);\r\n              this.ready.emit({ ymaps3, entity: this.control });\r\n            }),\r\n          ),\r\n        ),\r\n        takeUntil(this.destroy$),\r\n      )\r\n      .subscribe();\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    // It must be run outside a zone; otherwise, all async events within this call will cause ticks.\r\n    this.ngZone.runOutsideAngular(() => {\r\n      if (this.control) {\r\n        this.control.update(changes['props'].currentValue);\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.control) {\r\n      this.yMapControlsDirective.controls$.value?.removeChild(this.control);\r\n    }\r\n\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","import type { OnChanges, OnDestroy, OnInit, SimpleChanges } from '@angular/core';\r\nimport { Directive, EventEmitter, inject, Input, NgZone, Output } from '@angular/core';\r\nimport type { YMapScaleControl, YMapScaleControlProps } from '@yandex/ymaps3-types';\r\nimport { Subject, takeUntil } from 'rxjs';\r\nimport { filter } from 'rxjs/operators';\r\n\r\nimport type { YReadyEvent } from '../../../types/y-ready-event';\r\nimport { YMapControlsDirective } from '../y-map-controls/y-map-controls.directive';\r\n\r\n/**\r\n * This component wraps the [ymaps3.YMapScaleControl](https://yandex.ru/dev/jsapi30/doc/ru/ref/#class-ymapscalecontrol) class from the Yandex.Maps API.\r\n * All component inputs are named the same as the API class constructor arguments. This component must be used inside a `y-map-controls` component.\r\n *\r\n * ```html\r\n * <y-map\r\n *   [props]=\"{\r\n *     location: {\r\n *       center: [-0.127696, 51.507351],\r\n *       zoom: 9,\r\n *     },\r\n *   }\"\r\n * >\r\n *   <y-map-default-scheme-layer />\r\n *\r\n *   <y-map-controls [props]=\"{ position: 'top' }\">\r\n *     <y-map-scale-control />\r\n *   </y-map-controls>\r\n * </y-map>\r\n * ```\r\n */\r\n@Directive({\r\n  selector: 'y-map-scale-control',\r\n})\r\nexport class YMapScaleControlDirective implements OnInit, OnChanges, OnDestroy {\r\n  private readonly ngZone = inject(NgZone);\r\n  private readonly yMapControlsDirective = inject(YMapControlsDirective);\r\n\r\n  private readonly destroy$ = new Subject<void>();\r\n\r\n  private control?: YMapScaleControl;\r\n\r\n  /**\r\n   * See the API entity documentation for detailed information. Supports ngOnChanges.\r\n   * {@link https://yandex.ru/dev/jsapi30/doc/ru/ref/#YMapScaleControlProps}\r\n   */\r\n  @Input() props: YMapScaleControlProps = {};\r\n\r\n  /**\r\n   * The entity instance is created. This event runs outside an Angular zone.\r\n   */\r\n  @Output() ready: EventEmitter<YReadyEvent<YMapScaleControl>> = new EventEmitter<\r\n    YReadyEvent<YMapScaleControl>\r\n  >();\r\n\r\n  ngOnInit() {\r\n    this.yMapControlsDirective.controls$\r\n      .pipe(filter(Boolean), takeUntil(this.destroy$))\r\n      .subscribe((controls) => {\r\n        this.control = new ymaps3.YMapScaleControl(this.props);\r\n        controls.addChild(this.control);\r\n        this.ready.emit({ ymaps3, entity: this.control });\r\n      });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    // It must be run outside a zone; otherwise, all async events within this call will cause ticks.\r\n    this.ngZone.runOutsideAngular(() => {\r\n      if (this.control) {\r\n        this.control.update(changes['props'].currentValue);\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.control) {\r\n      this.yMapControlsDirective.controls$.value?.removeChild(this.control);\r\n    }\r\n\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","import type { OnChanges, OnDestroy, OnInit, SimpleChanges } from '@angular/core';\r\nimport { Directive, EventEmitter, inject, Input, NgZone, Output } from '@angular/core';\r\nimport type { YMap } from '@yandex/ymaps3-types';\r\nimport type { YMapZoomControl, YMapZoomControlProps } from '@yandex/ymaps3-types/packages/controls';\r\nimport { from, Subject, takeUntil, tap } from 'rxjs';\r\nimport { filter, switchMap } from 'rxjs/operators';\r\n\r\nimport type { ComplexOptions } from '../../../types/complex-options';\r\nimport type { YReadyEvent } from '../../../types/y-ready-event';\r\nimport { YMapControlsDirective } from '../y-map-controls/y-map-controls.directive';\r\n\r\n/**\r\n * This component wraps the [ymaps3.YMapZoomControl](https://yandex.ru/dev/jsapi30/doc/ru/ref/packages/controls/#class-ymapzoomcontrol) class from the Yandex.Maps API.\r\n * All component inputs are named the same as the API class constructor arguments. This component must be used inside a `y-map-controls` component.\r\n * This component is from the `@yandex/ymaps3-controls@0.0.1` package, which is asynchronously loaded when you use this component.\r\n *\r\n * ```html\r\n * <y-map\r\n *   [props]=\"{\r\n *     location: {\r\n *       center: [-0.127696, 51.507351],\r\n *       zoom: 9,\r\n *     },\r\n *   }\"\r\n * >\r\n *   <y-map-default-scheme-layer />\r\n *\r\n *   <y-map-controls [props]=\"{ position: 'top' }\">\r\n *     <y-map-zoom-control-button />\r\n *   </y-map-controls>\r\n * </y-map>\r\n * ```\r\n */\r\n@Directive({\r\n  selector: 'y-map-zoom-control-button',\r\n})\r\nexport class YMapZoomControlDirective implements OnInit, OnChanges, OnDestroy {\r\n  private readonly ngZone = inject(NgZone);\r\n  private readonly yMapControlsDirective = inject(YMapControlsDirective);\r\n\r\n  private readonly destroy$ = new Subject<void>();\r\n\r\n  private control?: YMapZoomControl;\r\n\r\n  /**\r\n   * See the API entity documentation for detailed information. Supports ngOnChanges.\r\n   * {@link https://yandex.ru/dev/jsapi30/doc/ru/ref/packages/controls/#YMapZoomControlProps}\r\n   */\r\n  @Input() props: YMapZoomControlProps = {};\r\n\r\n  /**\r\n   * See the API entity documentation for detailed information.\r\n   */\r\n  @Input() options?: ComplexOptions<YMap>;\r\n\r\n  /**\r\n   * The entity instance is created. This event runs outside an Angular zone.\r\n   */\r\n  @Output() ready: EventEmitter<YReadyEvent<YMapZoomControl>> = new EventEmitter<\r\n    YReadyEvent<YMapZoomControl>\r\n  >();\r\n\r\n  ngOnInit() {\r\n    this.yMapControlsDirective.controls$\r\n      .pipe(\r\n        filter(Boolean),\r\n        switchMap((controls) =>\r\n          // It's safe to call it each time, the Yandex.Maps API handles multiple requests under the hood.\r\n          from(ymaps3.import('@yandex/ymaps3-controls@0.0.1')).pipe(\r\n            tap(({ YMapZoomControl }) => {\r\n              this.control = new YMapZoomControl(this.props, this.options);\r\n              controls.addChild(this.control);\r\n              this.ready.emit({ ymaps3, entity: this.control });\r\n            }),\r\n          ),\r\n        ),\r\n        takeUntil(this.destroy$),\r\n      )\r\n      .subscribe();\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    // It must be run outside a zone; otherwise, all async events within this call will cause ticks.\r\n    this.ngZone.runOutsideAngular(() => {\r\n      if (this.control) {\r\n        this.control.update(changes['props'].currentValue);\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.control) {\r\n      this.yMapControlsDirective.controls$.value?.removeChild(this.control);\r\n    }\r\n\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","import type { OnChanges, OnDestroy, OnInit, SimpleChanges } from '@angular/core';\r\nimport { Directive, EventEmitter, inject, Input, NgZone, Output } from '@angular/core';\r\nimport type {\r\n  YMap,\r\n  YMapDefaultFeaturesLayer,\r\n  YMapDefaultFeaturesLayerProps,\r\n} from '@yandex/ymaps3-types';\r\nimport { Subject, takeUntil } from 'rxjs';\r\nimport { filter } from 'rxjs/operators';\r\n\r\nimport type { ComplexOptions } from '../../../types/complex-options';\r\nimport type { YReadyEvent } from '../../../types/y-ready-event';\r\nimport { YMapComponent } from '../../common/y-map/y-map.component';\r\n\r\n/**\r\n * This component wraps the [ymaps3.YMapDefaultFeaturesLayer](https://yandex.ru/dev/jsapi30/doc/ru/ref/#class-ymapdefaultfeatureslayer) class from the Yandex.Maps API.\r\n * All component inputs are named the same as the API class constructor arguments.\r\n *\r\n * ```html\r\n * <y-map\r\n *   [props]=\"{\r\n *     location: {\r\n *       center: [-0.127696, 51.507351],\r\n *       zoom: 10,\r\n *     },\r\n *   }\"\r\n * >\r\n *   <y-map-default-features-layer />\r\n * </y-map>\r\n * ```\r\n */\r\n@Directive({\r\n  selector: 'y-map-default-features-layer',\r\n})\r\nexport class YMapDefaultFeaturesLayerDirective implements OnInit, OnDestroy, OnChanges {\r\n  private readonly ngZone = inject(NgZone);\r\n  private readonly yMapComponent = inject(YMapComponent);\r\n\r\n  private readonly destroy$ = new Subject<void>();\r\n\r\n  private layer?: YMapDefaultFeaturesLayer;\r\n\r\n  /**\r\n   * See the API entity documentation for detailed information. Supports ngOnChanges.\r\n   * {@link https://yandex.ru/dev/jsapi30/doc/ru/ref/#YMapDefaultFeaturesLayerProps}\r\n   */\r\n  @Input() props: YMapDefaultFeaturesLayerProps = {};\r\n\r\n  /**\r\n   * See the API entity documentation for detailed information.\r\n   */\r\n  @Input() options?: ComplexOptions<YMap>;\r\n\r\n  /**\r\n   * The entity instance is created. This event runs outside an Angular zone.\r\n   */\r\n  @Output() ready: EventEmitter<YReadyEvent<YMapDefaultFeaturesLayer>> = new EventEmitter<\r\n    YReadyEvent<YMapDefaultFeaturesLayer>\r\n  >();\r\n\r\n  ngOnInit() {\r\n    this.yMapComponent.map$.pipe(filter(Boolean), takeUntil(this.destroy$)).subscribe((map) => {\r\n      this.layer = new ymaps3.YMapDefaultFeaturesLayer(this.props, this.options);\r\n      map.addChild(this.layer);\r\n      this.ready.emit({ ymaps3, entity: this.layer });\r\n    });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    // It must be run outside a zone; otherwise, all async events within this call will cause ticks.\r\n    this.ngZone.runOutsideAngular(() => {\r\n      if (this.layer) {\r\n        this.layer.update(changes['props'].currentValue);\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.layer) {\r\n      this.yMapComponent.map$.value?.removeChild(this.layer);\r\n    }\r\n\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","import type { OnChanges, OnDestroy, OnInit, SimpleChanges } from '@angular/core';\r\nimport { Directive, EventEmitter, inject, Input, NgZone, Output } from '@angular/core';\r\nimport type {\r\n  YMap,\r\n  YMapDefaultSchemeLayer,\r\n  YMapDefaultSchemeLayerProps,\r\n} from '@yandex/ymaps3-types';\r\nimport { Subject, takeUntil } from 'rxjs';\r\nimport { filter } from 'rxjs/operators';\r\n\r\nimport type { ComplexOptions } from '../../../types/complex-options';\r\nimport type { YReadyEvent } from '../../../types/y-ready-event';\r\nimport { YMapComponent } from '../../common/y-map/y-map.component';\r\n\r\n/**\r\n * This component wraps the [ymaps3.YMapDefaultSchemeLayer](https://yandex.ru/dev/jsapi30/doc/ru/ref/#class-ymapdefaultschemelayer) class from the Yandex.Maps API.\r\n * All component inputs are named the same as the API class constructor arguments.\r\n *\r\n * ```html\r\n * <y-map\r\n *   [props]=\"{\r\n *     location: {\r\n *       center: [-0.127696, 51.507351],\r\n *       zoom: 10,\r\n *     },\r\n *   }\"\r\n * >\r\n *   <y-map-default-scheme-layer />\r\n * </y-map>\r\n * ```\r\n */\r\n@Directive({\r\n  selector: 'y-map-default-scheme-layer',\r\n})\r\nexport class YMapDefaultSchemeLayerDirective implements OnInit, OnDestroy, OnChanges {\r\n  private readonly ngZone = inject(NgZone);\r\n  private readonly yMapComponent = inject(YMapComponent);\r\n\r\n  private readonly destroy$ = new Subject<void>();\r\n\r\n  private layer?: YMapDefaultSchemeLayer;\r\n\r\n  /**\r\n   * See the API entity documentation for detailed information. Supports ngOnChanges.\r\n   * {@link https://yandex.ru/dev/jsapi30/doc/ru/ref/#YMapDefaultSchemeLayerProps}\r\n   */\r\n  @Input() props: YMapDefaultSchemeLayerProps = {};\r\n\r\n  /**\r\n   * See the API entity documentation for detailed information.\r\n   */\r\n  @Input() options?: ComplexOptions<YMap>;\r\n\r\n  /**\r\n   * The entity instance is created. This event runs outside an Angular zone.\r\n   */\r\n  @Output() ready: EventEmitter<YReadyEvent<YMapDefaultSchemeLayer>> = new EventEmitter<\r\n    YReadyEvent<YMapDefaultSchemeLayer>\r\n  >();\r\n\r\n  ngOnInit() {\r\n    this.yMapComponent.map$.pipe(filter(Boolean), takeUntil(this.destroy$)).subscribe((map) => {\r\n      this.layer = new ymaps3.YMapDefaultSchemeLayer(this.props, this.options);\r\n      map.addChild(this.layer);\r\n      this.ready.emit({ ymaps3, entity: this.layer });\r\n    });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    // It must be run outside a zone; otherwise, all async events within this call will cause ticks.\r\n    this.ngZone.runOutsideAngular(() => {\r\n      if (this.layer) {\r\n        this.layer.update(changes['props'].currentValue);\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.layer) {\r\n      this.yMapComponent.map$.value?.removeChild(this.layer);\r\n    }\r\n\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","import type { OnChanges, OnDestroy, OnInit, SimpleChanges } from '@angular/core';\r\nimport { Directive, EventEmitter, inject, Input, NgZone, Output } from '@angular/core';\r\nimport type { YMapLayer, YMapLayerProps } from '@yandex/ymaps3-types';\r\nimport { Subject, takeUntil } from 'rxjs';\r\nimport { filter } from 'rxjs/operators';\r\n\r\nimport type { YReadyEvent } from '../../../types/y-ready-event';\r\nimport { YMapComponent } from '../../common/y-map/y-map.component';\r\n\r\n/**\r\n * This component wraps the [ymaps3.YMapLayer](https://yandex.ru/dev/jsapi30/doc/ru/ref/#class-ymaplayer) class from the Yandex.Maps API.\r\n * All component inputs are named the same as the API class constructor arguments.\r\n *\r\n * ```html\r\n * <y-map\r\n *   [props]=\"{\r\n *     location: {\r\n *       center: [-0.127696, 51.507351],\r\n *       zoom: 10,\r\n *     },\r\n *   }\"\r\n * >\r\n *   <y-map-default-scheme-layer />\r\n *\r\n *   <y-map-layer\r\n *     [props]=\"{\r\n *       type: 'markers',\r\n *       zIndex: 1800,\r\n *     }\"\r\n *   />\r\n * </y-map>\r\n * ```\r\n */\r\n@Directive({\r\n  selector: 'y-map-layer',\r\n})\r\nexport class YMapLayerDirective implements OnInit, OnDestroy, OnChanges {\r\n  private readonly ngZone = inject(NgZone);\r\n  private readonly yMapComponent = inject(YMapComponent);\r\n\r\n  private readonly destroy$ = new Subject<void>();\r\n\r\n  private layer?: YMapLayer;\r\n\r\n  /**\r\n   * See the API entity documentation for detailed information. Supports ngOnChanges.\r\n   * {@link https://yandex.ru/dev/jsapi30/doc/ru/ref/#YMapLayerProps}\r\n   */\r\n  @Input({ required: true }) props!: YMapLayerProps;\r\n\r\n  /**\r\n   * The entity instance is created. This event runs outside an Angular zone.\r\n   */\r\n  @Output() ready: EventEmitter<YReadyEvent<YMapLayer>> = new EventEmitter<\r\n    YReadyEvent<YMapLayer>\r\n  >();\r\n\r\n  ngOnInit() {\r\n    this.yMapComponent.map$.pipe(filter(Boolean), takeUntil(this.destroy$)).subscribe((map) => {\r\n      this.layer = new ymaps3.YMapLayer(this.props);\r\n      map.addChild(this.layer);\r\n      this.ready.emit({ ymaps3, entity: this.layer });\r\n    });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    // It must be run outside a zone; otherwise, all async events within this call will cause ticks.\r\n    this.ngZone.runOutsideAngular(() => {\r\n      if (this.layer) {\r\n        this.layer.update(changes['props'].currentValue);\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.layer) {\r\n      this.yMapComponent.map$.value?.removeChild(this.layer);\r\n    }\r\n\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","/*\r\n * Public API Surface of angular-yandex-maps-v3\r\n */\r\n\r\n// Components\r\nexport * from './lib/components/common/y-map/y-map.component';\r\nexport * from './lib/components/common/y-map-clusterer/y-map-clusterer.directive';\r\nexport * from './lib/components/common/y-map-default-marker/y-map-default-marker.directive';\r\nexport * from './lib/components/common/y-map-feature/y-map-feature.directive';\r\nexport * from './lib/components/common/y-map-feature-data-source/y-map-feature-data-source.directive';\r\nexport * from './lib/components/common/y-map-hint/y-map-hint.directive';\r\nexport * from './lib/components/common/y-map-listener/y-map-listener.directive';\r\nexport * from './lib/components/common/y-map-marker/y-map-marker.directive';\r\nexport * from './lib/components/controls/y-map-control/y-map-control.directive';\r\nexport * from './lib/components/controls/y-map-control-button/y-map-control-button.directive';\r\nexport * from './lib/components/controls/y-map-control-common-button/y-map-control-common-button.directive';\r\nexport * from './lib/components/controls/y-map-controls/y-map-controls.directive';\r\nexport * from './lib/components/controls/y-map-geolocation-control/y-map-geolocation-control.directive';\r\nexport * from './lib/components/controls/y-map-open-maps-button/y-map-open-maps-button.directive';\r\nexport * from './lib/components/controls/y-map-scale-control/y-map-scale-control.directive';\r\nexport * from './lib/components/controls/y-map-zoom-control/y-map-zoom-control.directive';\r\nexport * from './lib/components/layers/y-map-default-features-layer/y-map-default-features-layer.directive';\r\nexport * from './lib/components/layers/y-map-default-scheme-layer/y-map-default-scheme-layer.directive';\r\nexport * from './lib/components/layers/y-map-layer/y-map-layer.directive';\r\n\r\n// Services\r\nexport * from './lib/services/y-api-loader/y-api-loader.service';\r\n\r\n// Types\r\nexport * from './lib/types/y-config';\r\nexport * from './lib/types/y-ready-event';\r\n\r\n// Tokens\r\nexport * from './lib/tokens/y-config';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}